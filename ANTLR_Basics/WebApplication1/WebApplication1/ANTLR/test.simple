// =======================================================
// INTERPRETER STRESS TEST
// ZIEL: Grenzen von Datentypen, Indizes und Funktionen testen.
// =======================================================

// VORBEREITUNG
baseString = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
resultString = "";
largeBase = 123456789.12345;
divisor = 3.0;
loopLimit = 10;
i = 0.0;

// TEST 1: Indizierung, Konkatenation & Schleifen-Grenzen
// Iteriert 10 mal (i=0 bis i=9)
loop from i to loopLimit {
    -- 1. MATH: Präzisionstest (sollte eine lange Fließkommazahl ergeben)
    largeNum = largeBase / divisor;
    
    -- 2. STRING 1 (Left): Substring-Extraktion. Länge: i + 1
    -- In der letzten Iteration (i=9) zieht es 10 Zeichen ('ABCDEFGHIJ')
    var subPart.Left(baseString, i + 1); 
    
    -- 3. STRING 2 (Concat): Verkettung mit String (resultString) und Zahl (i)
    -- WICHTIGE SCHWACHSTELLE: Muss Zahl 'i' korrekt in String umwandeln.
    var tempResult.Concat(resultString, subPart, " (Index=");
    var tempResult2.Concat(tempResult, i, ") "); 
    
    resultString = tempResult2;
    
    -- 4. RUNDUNG: Prüft die Stabilität der Math-Funktion mit komplexem Input
    var roundedVal.Round(largeNum, 4); -- Runde auf 4 Nachkommastellen
}

-- TEST 2: Index-Überlauf / Boundary Check (Left Range)
-- Left Range mit Start 20 ('U'), Länge 10. Die Länge des Strings ist 26.
-- Erwartet: UVWXYZ (Länge 6)
var overflowTest.Left(baseString, 20, 10); 

// FINAL PRÜFUNG
print("===================================");
print("STRESS-TEST ERGEBNISSE");
print("===================================");

-- Ausgabe 1: Rundung
print("1. RUNDUNG (von 41152263.04115): ->");
print(roundedVal); // Erwartet: 41152263.0412

-- Ausgabe 2: Index-Überlauf
print("2. INDEX-ÜBERLAUF (Left(20, 10)): ->");
print(overflowTest); // Erwartet: UVWXYZ

-- Ausgabe 3: Konkatenation & Schleifen (Prüft Coercion und Schleifenlogik)
print("3. RESULT-STRING (letzte 30 Zeichen): ->");
-- Da wir kein Right() haben, muss dies manuell geprüft werden.
-- Erwarteter End-Substring: ...HIJ (Index=9) 
print(resultString);